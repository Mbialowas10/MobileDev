---
title: Securing API Key
layout: home
nav_order: 7
has_children: true
---

## Securing API KEYS ##

Please consider following the process below whenever working with API Keys and publishing your 
codebase to gitHub.

1. Inside Gradle Scripts folder, open local.properties file and add 
any API Keys in this space. 

local.properties file contains information specific to your local 
configuration, making it an ideal place to stash api keys - so that they
don't end up on gitHub.

e.g. 

```plaintext
## This file is automatically generated by Android Studio.
# Do not modify this file -- YOUR CHANGES WILL BE ERASED!
#
# This file should *NOT* be checked into Version Control Systems,
# as it contains information specific to your local configuration.
#
# Location of the SDK. This is only used by Gradle.
# For customization when using a Version Control System, please read the
# header note.
sdk.dir=/Users/mikebialowas/Library/Android/sdk

#TMDB API KEY
TMDB_API_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
#GOOGLE API KEY
GOOGLE_API_KEY=yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy
#Serp API KEY
SERP_API_KEY=zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz
```

Please replace x,y, and z with actual api keys provided by service provider. Here
we have 3 api keys from TMDB, GOOGLE, and SERP Service providers.

2. Open build.gradle.kts file (Module :app) aka Module app Gradle file, and add
the following snippet:

```kotlin
defaultConfig {
    val localProperties = Properties()
    val localPropertiesFile = rootProject.file("local.properties")
    if (localPropertiesFile.exists()) {
        localProperties.load(FileInputStream(localPropertiesFile))
    }

    val tmdbApiKey = localProperties.getProperty("TMDB_API_KEY") ?: ""
    buildConfigField("String", "TMDB_API_KEY", "\"$tmdbApiKey\"")

    val googleApiKey = localProperties.getProperty("GOOGLE_API_KEY") ?: ""
    buildConfigField("String", "GOOGLE_API_KEY", "\"$googleApiKey\"")
    manifestPlaceholders["googleMapsApiKey"] = googleApiKey

    val serpApiKey = localProperties.getProperty("SERP_API_KEY") ?: ""
    buildConfigField("String", "SERP_API_KEY", "\"$serpApiKey\"")
}
buildFeatures {
    buildConfig = true
}
```

the localProperties.getProperty() function does what you may expect it to.
It fetches the value stored in TMDB_API_KEY found in location.properties file
and assigns it to variable tmdbApiKey.

This process is repeated for any other apiKeys required. Here we need reference to
googleApiKey and SerpApiKey shoulde they are provided here.

Last, buildConfig must be set to true for BuildConfig information to built and available to
application.

3. After making changes to any gradle files, remember to save then sync the file. 

4. Now the api keys can be used in your project by simply calling the BuildConfig object.

```kotlin
    // api key
    var api_key: String = BuildConfig.TMDB_API_KEY
```

**Note:** Google Maps

```xml
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools">

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.POST_NOTIFICATIONS"/>



    <application
        android:name=".MyApplication"
        android:allowBackup="true"
        android:dataExtractionRules="@xml/data_extraction_rules"
        android:fullBackupContent="@xml/backup_rules"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:roundIcon="@mipmap/ic_launcher_round"
        android:supportsRtl="true"
        android:theme="@style/Theme.MovieHubSPR_INT_2025"
        tools:targetApi="31">

        <activity
            android:name=".MainActivity"
            android:exported="true"
            android:label="@string/app_name"
            android:theme="@style/Theme.MovieHubSPR_INT_2025"
            tools:ignore="Instantiatable">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".SignInActivity"
            android:exported="true"
            android:label="@string/title_activity_sign_in"
            android:theme="@style/Theme.MovieHubSPR_INT_2025">
        </activity>
        <meta-data
            android:name="com.google.android.geo.API_KEY"
            android:value="${googleMapsApiKey}" />
    </application>
</manifest>
```

Note the use of accessing api key inside meta-data xml tag.




